<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reseñas Reportadas - Admin - Buho Eats</title>
        <script src="../libs/tailwind.js"></script>
        <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3D405B',
                        secondary: '#588B8B',
                        success: '#06BB0C',
                        danger: '#C11D0C',
                    }
                }
            }
        }
        </script>
        <link rel="stylesheet" href="../assets/css/main.css">
        <link rel="stylesheet" href="../assets/css/admin.css">
        <style>
            /* Imagen de fondo con overlay oscuro (consistente con otras vistas admin) */
            body {
                background-image: url('../assets/img/background.jpg');
                background-size: cover;
                background-position: center;
                background-attachment: fixed;
                background-repeat: no-repeat;
                position: relative;
            }
            body::before {
                content: '';
                position: fixed;
                top: 0; left: 0; width: 100%; height: 100%;
                background-color: rgba(0,0,0,0.2);
                z-index: -1;
            }
            main { padding-top: 120px !important; min-height: calc(100vh - 120px); }
        </style>
</head>
<body class="bg-gray-50" data-page="dashboard">
    <div id="header-container"></div>

    <main class="container mx-auto px-4 py-8">
        <h2 class="text-2xl font-bold text-primary mb-4">Reseñas reportadas — Admin</h2>

        <section id="admin-panels" class="relative grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <div class="absolute top-0 right-0 mt-2 mr-2 z-50">
                <button id="showAllBtn" class="hidden px-4 py-2 bg-secondary text-white rounded-lg shadow-md" title="Mostrar todo">Mostrar todo</button>
            </div>

            <div id="reportedReviewsList" class="col-span-1 p-4 bg-white rounded-lg shadow-md">
                <div class="text-gray-500">Cargando reseñas reportadas...</div>
            </div>

            <div id="stats" class="col-span-1 p-4 bg-white rounded-lg shadow-md" style="display:none"></div>
            <div id="users-list" class="col-span-1 p-4 bg-white rounded-lg shadow-md" style="display:none"></div>
        </section>
    </main>

    <div id="footer-container"></div>

    <script src="../assets/js/config.js"></script>
    <script src="../assets/js/utils.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/header.js"></script>
    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/auth.js"></script>
    <script src="../assets/js/admin.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function(){
            try {
                // If admin.js exposes showOnlyPanel, use it to focus this view (keeps behaviour consistent)
                if (typeof showOnlyPanel === 'function') {
                    // 'reported-reviews' maps to 'reports' panel in admin.js map, ensure showOnlyPanel shows our container
                    showOnlyPanel('reports');
                    const showAllBtn = document.getElementById('showAllBtn'); if (showAllBtn) showAllBtn.classList.remove('hidden');
                }

                const btn = document.getElementById('refreshReportedReviews');
                if (btn) btn.addEventListener('click', function(){ if (typeof window.loadReportedReviews === 'function') window.loadReportedReviews(); });

                if (typeof window.loadReportedReviews === 'function') window.loadReportedReviews();
            } catch(e){ console.warn('Init reported reviews page error', e); }
        });
    </script>
</body>
</html>
