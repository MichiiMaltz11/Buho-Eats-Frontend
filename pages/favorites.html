<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Favoritos - Buho Eats</title>
    <link rel="icon" type="image/svg+xml" href="../assets/images/logo-dark.svg">
    
    <!-- Tailwind CSS -->
    <script src="../libs/tailwind.js"></script>
    
    <!-- Configuración de Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3D405B',
                        secondary: '#588B8B',
                        success: '#06BB0C',
                        danger: '#C11D0C',
                    }
                }
            }
        }
    </script>
    
    <!-- Estilos personalizados -->
    <style>
        /* Imagen de fondo con overlay oscuro */
        body {
            background: url('../assets/img/background.jpg') center center / cover no-repeat fixed;
            min-height: 100vh;
            position: relative;
        }
        
        /* Overlay oscuro semitransparente */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.2);
            z-index: -1;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div id="header-container"></div>

    <!-- Contenido Principal -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8" style="padding-top: 150px !important; padding-bottom: 80px; min-height: calc(100vh - 300px);">
        <!-- Título -->
        <div class="mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Favoritos</h1>
        </div>

        <!-- Grid de restaurantes favoritos -->
        <div id="favoritesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12" style="display: none;">
            <!-- Los restaurantes favoritos se cargarán aquí dinámicamente -->
        </div>

        <!-- Estado vacío -->
        <div id="emptyState" class="text-center py-20 bg-gray-800/70 backdrop-blur-sm rounded-2xl max-w-2xl mx-auto px-8">
            <div class="mb-6">
                <svg class="w-24 h-24 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                </svg>
            </div>
            <h2 class="text-3xl font-bold text-white mb-4">No hay favoritos</h2>
            <p class="text-gray-300 mb-8">Aún no has agregado restaurantes a tus favoritos</p>
            <a href="dashboard-user.html" class="inline-block bg-secondary hover:bg-secondary/90 text-white font-bold py-3 px-8 rounded-lg transition transform hover:scale-105">
                Explorar Restaurantes
            </a>
        </div>
    </main>

    <!-- Footer -->
    <div id="footer-container"></div>

    <!-- Dialog personalizado -->
    <div id="dialog-container"></div>

    <!-- Scripts -->
    <script src="../assets/js/config.js"></script>
    <script src="../assets/js/utils.js"></script>
    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/auth.js"></script>
    <script src="../assets/js/dialog.js"></script>
    <script src="../assets/js/header.js"></script>
    <script src="../assets/js/favorites.js"></script>
    
    <script>
        async function loadComponents() {
            try {
                // Cargar header
                const headerResponse = await fetch('../components/header.html');
                const headerHtml = await headerResponse.text();
                document.getElementById('header-container').innerHTML = headerHtml;
                
                // Llamar funciones del header después de cargarlo
                setTimeout(() => {
                    if (typeof window.loadUserInfo === 'function') {
                        window.loadUserInfo();
                    }
                    if (typeof window.showHomeOptionIfNeeded === 'function') {
                        window.showHomeOptionIfNeeded();
                    }
                }, 300);
                
                // Cargar footer
                const footerResponse = await fetch('../components/footer.html');
                const footerHtml = await footerResponse.text();
                document.getElementById('footer-container').innerHTML = footerHtml;

                // Cargar dialog
                const dialogResponse = await fetch('../components/dialog.html');
                const dialogHtml = await dialogResponse.text();
                document.getElementById('dialog-container').innerHTML = dialogHtml;
            } catch (error) {
                console.error('Error al cargar componentes:', error);
            }
        }

        function toggleUserMenu() {
            const dropdown = document.getElementById('userMenuDropdown');
            dropdown.classList.toggle('hidden');
        }

        // Cerrar el dropdown si se hace clic fuera de él
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('userMenuButton');
            const dropdown = document.getElementById('userMenuDropdown');
            
            if (userMenu && dropdown && !userMenu.contains(event.target) && !dropdown.contains(event.target)) {
                dropdown.classList.add('hidden');
            }
        });

        function logout() {
            showDialog({
                title: 'Cerrar Sesión',
                message: '¿Estás seguro de que deseas cerrar sesión?',
                confirmText: 'Aceptar',
                cancelText: 'Cancelar',
                onConfirm: function() {
                    Auth.logout().catch(err => console.error('Error en logout:', err));
                }
            });
        }

        window.addEventListener('DOMContentLoaded', loadComponents);
    </script>
</body>
</html>
